<idea-plugin>
    <id>com.hytaledocs.hytale</id>
    <name>Hytale Docs Dev Tools</name>
    <vendor email="contact@hytale-docs.com" url="https://hytale-docs.com">HytaleDocs</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>

    <resource-bundle>messages.HytaleBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- New Project Wizard - Appears in "New Project" section -->
        <newProjectWizard.languageGenerator
                implementation="com.hytaledocs.intellij.wizard.HytaleNewProjectWizard"/>

        <!-- File Templates -->
        <internalFileTemplate name="Hytale Mod"/>
        <internalFileTemplate name="Hytale Listener"/>
        <internalFileTemplate name="Hytale Command"/>
        <internalFileTemplate name="Hytale ECS System"/>

        <!-- Live Templates -->
        <defaultLiveTemplates file="/liveTemplates/Hytale.xml"/>
        <liveTemplateContext
                contextId="HYTALE"
                implementation="com.hytaledocs.intellij.templates.HytaleTemplateContext"/>

        <!-- Tool Window -->
        <toolWindow
                factoryClass="com.hytaledocs.intellij.toolWindow.HytaleToolWindowFactory"
                id="HytaleDocs"
                anchor="right"
                icon="/icons/hytaledocs-plugin-13.svg"/>

        <!-- Notifications -->
        <notificationGroup
                id="Hytale Plugin"
                displayType="BALLOON"/>

        <!-- Settings -->
        <projectConfigurable
                parentId="tools"
                instance="com.hytaledocs.intellij.settings.HytaleSettingsConfigurable"
                id="com.hytaledocs.intellij.settings.HytaleSettings"
                displayName="Hytale Server"
                nonDefaultProject="true"/>

        <!-- Services -->
        <projectService
                serviceImplementation="com.hytaledocs.intellij.settings.HytaleServerSettings"/>
        <projectService
                serviceImplementation="com.hytaledocs.intellij.services.ServerDownloadService"/>
        <projectService
                serviceImplementation="com.hytaledocs.intellij.services.ServerLaunchService"/>
        <projectService
                serviceImplementation="com.hytaledocs.intellij.services.HytaleProjectService"/>
        <projectService
                serviceImplementation="com.hytaledocs.intellij.services.AssetScannerService"/>

        <applicationService
                serviceImplementation="com.hytaledocs.intellij.services.JavaInstallService"/>
        <applicationService
                serviceImplementation="com.hytaledocs.intellij.services.HytaleDownloaderService"/>
        <applicationService
                serviceImplementation="com.hytaledocs.intellij.services.AuthenticationService"/>
        <applicationService
                serviceImplementation="com.hytaledocs.intellij.services.DocumentationService"/>
        <applicationService
                serviceImplementation="com.hytaledocs.intellij.services.DocumentationApiClient"/>

        <!-- Documentation Provider for F1 Help -->
        <lang.documentationProvider
                language="JAVA"
                implementationClass="com.hytaledocs.intellij.documentation.HytaleDocumentationProvider"
                order="first"/>

        <!-- Server Data Service for API completion data -->
        <applicationService
                serviceImplementation="com.hytaledocs.intellij.services.ServerDataService"/>

        <!-- Code Completion for Hytale API -->
        <completion.contributor
                language="JAVA"
                implementationClass="com.hytaledocs.intellij.completion.HytaleCompletionContributor"
                order="first"/>
    </extensions>

    <actions>
        <group id="HytaleDocs.NewGroup" text="Hytale" description="Hytale mod development">
            <add-to-group group-id="NewGroup" anchor="after" relative-to-action="NewGroup1"/>

            <action id="HytaleDocs.NewMod"
                    class="com.hytaledocs.intellij.actions.NewPluginAction"
                    text="Hytale Plugin"
                    description="Create a new Hytale plugin class"
                    icon="/icons/hytaledocs-plugin-16.svg"/>

            <action id="HytaleDocs.NewListener"
                    class="com.hytaledocs.intellij.actions.NewListenerAction"
                    text="Hytale Listener"
                    description="Create a new Hytale event listener"/>

            <action id="HytaleDocs.NewCommand"
                    class="com.hytaledocs.intellij.actions.NewCommandAction"
                    text="Hytale Command"
                    description="Create a new Hytale command"/>
        </group>

        <group id="HytaleDocs.ToolsMenu" text="Hytale Server" description="Hytale server management">
            <add-to-group group-id="ToolsMenu" anchor="last"/>

            <action id="HytaleDocs.SetupServer"
                    class="com.hytaledocs.intellij.actions.SetupServerAction"
                    text="Setup Server..."
                    description="Download Java 25 and server files for Hytale development"
                    icon="/icons/hytaledocs-plugin-16.svg"/>

            <action id="HytaleDocs.DownloadServerJar"
                    class="com.hytaledocs.intellij.actions.DownloadServerJarAction"
                    text="Download Server JAR"
                    description="Download the latest HytaleServer.jar from CDN"/>

            <separator/>

            <action id="HytaleDocs.QuickReloadPlugins"
                    class="com.hytaledocs.intellij.actions.QuickReloadPluginsAction"
                    text="Reload Plugins"
                    description="Send /reload plugins command to the running Hytale server"
                    icon="AllIcons.Actions.Refresh"/>
        </group>
    </actions>
</idea-plugin>
